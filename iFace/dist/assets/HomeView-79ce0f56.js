import{a as g,u as _,m as V,_ as B,r as d,b as D,o as c,c as v,w as j,d as e,e as t,f as A,g as C,h as I,i as N,j as f,k as w,t as E,l as T,n as U,p as R}from"./index-8071416f.js";const q={name:"SignInView",data:()=>({appName:g,userAuth:{}}),emits:["signin"],inject:["dialogRef"],methods:{async signin(){const o=_();await o.registerUser(this.userAuth.email,this.userAuth.password),o.userStore&&o.userStore.id?(this.closeDialog(),this.$emit("signin",{user:o.userStore}),this.$router.push({path:"/"})):this.$emit("fail")},closeDialog(){this.dialogRef.close()}},mounted(){this.userAuth.email=this.dialogRef.data.email,delete this.userAuth.password},computed:{...V(_,["userStore"])}},M={class:"flex justify-content-center p-fluid"},z={class:"card"},F={class:"field col-12 md:col-4"},H={class:"p-inputgroup"},O=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-user"})],-1),G={class:"p-float-label"},J=e("label",{for:"password"},"Sua senha",-1);function K(o,i,a,S,y,s){const r=d("InputText"),p=d("Button"),h=D("focustrap");return c(),v("div",M,[j((c(),v("div",z,[e("form",{onSubmit:i[1]||(i[1]=A((...n)=>this.signin&&this.signin(...n),["prevent"]))},[e("div",F,[e("div",H,[O,e("span",G,[t(r,{modelValue:this.userAuth.password,"onUpdate:modelValue":i[0]||(i[0]=n=>this.userAuth.password=n),type:"password",id:"password"},null,8,["modelValue"]),J])])]),t(p,{type:"submit",label:"Submit",class:"mt-2"})],32)])),[[h]])])}const L=B(q,[["render",K]]),P={key:0,class:"card flex justify-content-center"},Q={class:"p-inputgroup flex-1"},W={key:1},Y={__name:"HomeView",setup(o){const i=C(),a=I(),S=_(),y=N(),s=f(),r=f(),p=f(),h=()=>{s.value&&n()?i.open(L,{props:{header:`Seja bem vindo ao ${g}`,style:{width:"50vw"},modal:!0},data:{email:s.value},emits:{onSignin:l=>{a.add({severity:"success",detail:`Seja bem vindo ${l.user.name}!`,life:3e3})},onFail:()=>{a.add({severity:"error",detail:"Combinação de usuário e senha não localizado!",life:3e3})}}}):(a.add({severity:"error",detail:"Usuário não informado ou inválido!",life:3e3}),r.value="p-invalid")},n=()=>{const l=s.value;return l.replace(/([^\d])+/gim,"").length==11||R(l)?(r.value="",p.value=void 0,!0):(p.value="Email inválido!",a.add({severity:"error",detail:"Email inválido!",life:3e3}),r.value="p-invalid",!1)},x=()=>{y.push({path:"/"}),_().logout()};return(l,m)=>{const $=d("Divider"),u=d("Button"),k=d("InputText");return w(S).userStore.id?(c(),v("div",W,[t(u,{label:"Sair",onClick:x,icon:"pi pi-user"})])):(c(),v("div",P,[e("h1",null,"Seja bem vindo ao "+E(w(g)),1),t($),e("div",Q,[t(u,{icon:"pi pi-user"}),t(k,{id:"txt",modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=b=>s.value=b),type:"email",onBlur:n,placeholder:"Seu usuário"},null,8,["modelValue"]),t(u,{icon:"pi pi-check",severity:"success",onClick:h}),s.value?(c(),T(u,{key:0,icon:"pi pi-times",severity:"danger",onClick:m[1]||(m[1]=b=>s.value=void 0)})):U("",!0)]),t(u,{label:"Novo por aqui? Clique para se registrar!",link:"",icon:"pi pi-sign-in",class:"btn btn-primary btn-lg btn-block"})]))}}};export{Y as default};
